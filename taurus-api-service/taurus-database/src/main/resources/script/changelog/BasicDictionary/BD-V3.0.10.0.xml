<?xml version="1.1" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
				   http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.8.xsd">

    <!--工时表:标准工时和包装工时-->
    <changeSet logicalFilePath="BasicDictionary.xml" author="WangXun" id="BD-CT-20201124-01">
        <preConditions onFail="MARK_RAN" onFailMessage="标记已运行">
            <not>
                <tableExists tableName="BD_WORK_HOUR"/>
            </not>
        </preConditions>
        <comment>创建工时表(BD_WORK_HOUR)</comment>
        <createTable tableName="BD_WORK_HOUR" remarks="工时表">
            <column name="ID" type="${ID}" remarks="工时编号">
                <constraints primaryKey="true" primaryKeyName="PK_WORK_HOUR_ID"/>
            </column>
            <column name="TYPE" type="${TypeInt}" remarks="工时类型">
                <constraints nullable="false"/>
            </column>
            <column name="MATERIAL_ID" type="${ID}" remarks="物料编号"/>
            <column name="MATERIAL_CODE" type="${Code}" remarks="物料编码"/>
            <column name="PACK_SIZE_ID" type="${ID}" remarks="包装规格编号"/>
            <column name="PACK_SIZE_CODE" type="${Code}" remarks="包装规格编号"/>
            <column name="PACK_UNIT" type="${Name}" remarks="包装规格编号"/>
            <column name="WORK_HOUR" type="${Numerical}" remarks="工时">
                <constraints nullable="false"/>
            </column>
            <column name="DATA_SOURCE" type="${SmallInt}" remarks="数据源:0-系统、1-第三方" defaultValue="0"/>
            <column name="CREATE_BY" type="${ID}" remarks="创建人"/>
            <column name="CREATE_TIME" type="${DateTime}" remarks="创建时间"/>
            <column name="UPDATE_BY" type="${ID}" remarks="修改人"/>
            <column name="UPDATE_TIME" type="${DateTime}" remarks="修改时间"/>
        </createTable>
    </changeSet>
    <!--系统配置表添加数据：ERP接口参数-->
    <changeSet logicalFilePath="BasicDictionary.xml" author="WangXun" id="BD-ID-20201130-01">
        <preConditions onFail="MARK_RAN" onFailMessage="标记已运行">
            <not>
                <sqlCheck expectedResult="2">
                    SELECT COUNT(*) FROM BD_SYSTEM_CONFIG WHERE ID IN
                    ('u0AZIakkl4AkGO4ifWc099XjRnhDwzld','hy8c3hru4qoaszj44aigonouhw90y2x5')
                </sqlCheck>
            </not>
        </preConditions>
        <comment>系统配置表添加数据：ERP接口参数</comment>
        <insert tableName="BD_SYSTEM_CONFIG">
            <column name="ID" value="u0AZIakkl4AkGO4ifWc099XjRnhDwzld"/>
            <column name="MODULE_CODE" value="erp"/>
            <column name="CODE" value="raw_material_out_to_erp"/>
            <column name="VALUE"
                    value="{&quot;appCode&quot;:&quot;1010A005&quot;,&quot;code&quot;:&quot;1010W002&quot;,&quot;operationType&quot;:&quot;D_0100&quot;,&quot;source&quot;:&quot;801052&quot;,&quot;target&quot;:&quot;801052&quot;}"/>
            <column name="LANGUAGE_CODE" value="zh_CN"/>
            <column name="NAME" value="原材料退料接口"/>
            <column name="REMARK" value="原材料退料接口"/>
            <column name="SYSTEMATIC" value="Y"/>
        </insert>
        <insert tableName="BD_SYSTEM_CONFIG">
            <column name="ID" value="hy8c3hru4qoaszj44aigonouhw90y2x5"/>
            <column name="MODULE_CODE" value="erp"/>
            <column name="CODE" value="raw_material_out_cancel"/>
            <column name="VALUE"
                    value="{&quot;appCode&quot;:&quot;1010A005&quot;,&quot;code&quot;:&quot;1010W002&quot;,&quot;operationType&quot;:&quot;D_0300&quot;,&quot;source&quot;:&quot;801052&quot;,&quot;target&quot;:&quot;801052&quot;}"/>
            <column name="LANGUAGE_CODE" value="zh_CN"/>
            <column name="NAME" value="原材料退料撤销接口"/>
            <column name="REMARK" value="原材料退料撤销接口"/>
            <column name="SYSTEMATIC" value="Y"/>
        </insert>
        <rollback>
            <delete tableName="BD_SYSTEM_CONFIG">
                <where>
                    ID IN
                    ('u0AZIakkl4AkGO4ifWc099XjRnhDwzld','hy8c3hru4qoaszj44aigonouhw90y2x5')
                </where>
            </delete>
        </rollback>
    </changeSet>
    <!--包装规格表：修改计量单位字段数据类型-->
    <changeSet logicalFilePath="BasicDictionary.xml" author="WangXun" id="BD-MT-20201130-02">
        <comment>包装规格表：修改计量单位字段数据类型</comment>
        <modifyDataType tableName="BD_PACK_SIZE" columnName="MEASURE_UNIT" newDataType="${Name}"/>
        <rollback/>
    </changeSet>
    <!--人员表：修改固定电话字段长度-->
    <changeSet logicalFilePath="BasicDictionary.xml" author="WangXun" id="BD-MD-20201210-02">
        <modifyDataType tableName="BD_PERSON" columnName="TELEPHONE" newDataType="VARCHAR(13)"/>
        <rollback/>
    </changeSet>
</databaseChangeLog>